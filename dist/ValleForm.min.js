function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var a=[],r=!0,l=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){l=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(l)throw n}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_makeJsxRows=require("./makeElements/makeJsxRows"),_makeJsxRows2=_interopRequireDefault(_makeJsxRows),_makeSpeedDialActions=require("./makeElements/makeWebcomponents/makeSpeedDialActions"),_makeSpeedDialActions2=_interopRequireDefault(_makeSpeedDialActions),_Snackbar=require("./components/Snackbar"),_Snackbar2=_interopRequireDefault(_Snackbar),_Switch=require("./components/Switch"),_Switch2=_interopRequireDefault(_Switch),_addFieldsValues=require("./fieldsControl/addFieldsValues"),_addFieldsValues2=_interopRequireDefault(_addFieldsValues),_cleanFields=require("./fieldsControl/cleanFields"),_cleanFields2=_interopRequireDefault(_cleanFields),ValleForm=function(e){var t=e.tabs,a=void 0===t?[]:t,r=e._id,l=e.values,n=void 0===l?null:l,i=e.readOnly,o=void 0!==i&&i,c=e.baseApi,u=e.canonicalApi,s=e.params,_=e.$loading,d=void 0===_?"loading":_,f=e.buttons,m=void 0===f?[]:f,p=e.token,b=void 0===p?"":p,v=(0,_react.useState)(!1),y=_slicedToArray(v,2),k=y[0],S=y[1],F=(0,_react.useState)(!1),A=_slicedToArray(F,2),q=A[0],D=A[1],w=(0,_react.useState)(!1),R=_slicedToArray(w,2),h=R[0],E=R[1],x=(0,_react.useState)(0),C=_slicedToArray(x,2),T=C[0],g=C[1],V=(0,_react.useState)({open:!1,text:"",type:""}),J=_slicedToArray(V,2),N=J[0],O=J[1];(0,_react.useEffect)(function(){return S(o)},[o]),(0,_react.useEffect)(function(){n&&P()},[n]);var j=function(){E(h?!1:!0)},M=_react2.default.createRef(),B=function(){M.current.open=!1},I=function(){S(!1),D(!0),B()},L=function(){S(!0),D(!1)},P=function(){(0,_cleanFields2.default)(),(0,_addFieldsValues2.default)(n),S(!0),D(!1),B()},W=function(){(0,_cleanFields2.default)(),S(!1),D(!1)},$=function(e,t){O({open:!1}),setTimeout(function(){O({open:!0,text:e,type:t})},100)},z=function(e){g(e)},G=a.map(function(e,t){var a=T===t,r=a?"valleForm__tabs__title--selected":"";return _react2.default.createElement("button",{key:t,className:"valleForm__tabs__title "+r,onClick:function(){function e(){return z(t)}return e}()},e.title)}),H=a.map(function(e,t){var a=(0,_makeJsxRows2.default)(e.lines,h,k),r=T===t,l=r?"valleForm__tabs__tab--visible":"";return _react2.default.createElement("div",{key:t,className:"valleForm__tabs__tab "+l},a)}),K=N.open?_react2.default.createElement(_Snackbar2.default,{report:N.text,type:N.type}):null;return a.length>0?_react2.default.createElement("div",{className:"valleForm"},_react2.default.createElement(_Switch2.default,{label:"Limitar campos",readOnly:k,onChange:j}),1!==a.length?_react2.default.createElement("div",{className:"valleForm__tabs__titles"},G):null,H,_react2.default.createElement("span",{className:"valleForm__sub"},"* Campos obrigat√≥rios"),_react2.default.createElement("valle-speed-dial",{id:"valleSpeedDial",class:"valleForm__speedDial",ref:M},(0,_makeSpeedDialActions2.default)({buttons:m,readOnly:k,editable:q,baseApi:c,canonicalApi:u,params:s,_id:r,feedbackCb:$,editCb:I,formCb:L,cancelCb:P,newCB:W,token:b})),K):d};exports.default=ValleForm;