function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_makeJsxRows=require("./makeJsxRows"),_makeJsxRows2=_interopRequireDefault(_makeJsxRows),_makeSpeedDialActions=require("./makeSpeedDialActions"),_makeSpeedDialActions2=_interopRequireDefault(_makeSpeedDialActions),_Snackbar=require("./Snackbar"),_Snackbar2=_interopRequireDefault(_Snackbar),_Switch=require("./Switch"),_Switch2=_interopRequireDefault(_Switch),_apiCreate=require("./apiCreate"),_apiCreate2=_interopRequireDefault(_apiCreate),_addFieldsValues=require("./addFieldsValues"),_addFieldsValues2=_interopRequireDefault(_addFieldsValues),ValleForm=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={filterByVisibleScreen:!1,readOnly:!1,editable:!1,valleSpeedDialRef:null,defaultFieldsValues:null,feedback:{open:!1,text:"",type:""}},e}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){function e(){this.props.readOnly&&this.setState({readOnly:!0}),this.props.values&&((0,_addFieldsValues2.default)(this.props.values),this.setState({defaultFieldsValues:this.props.values})),this.setState({valleSpeedDialRef:document.getElementById("valleSpeedDial")})}return e}()},{key:"makeFieldsEditable",value:function(){function e(){this.setState({readOnly:!1,editable:!0}),this.state.valleSpeedDialRef.open=!1}return e}()},{key:"removeFieldsEditable",value:function(){function e(){this.setState({readOnly:!0,editable:!1}),this.state.valleSpeedDialRef.open=!1}return e}()},{key:"cancelFieldsEditable",value:function(){function e(){this.setState({readOnly:!0,editable:!1}),this.state.valleSpeedDialRef.open=!1,(0,_addFieldsValues2.default)(this.state.defaultFieldsValues)}return e}()},{key:"changeVisibleScreen",value:function(){function e(){this.state.filterByVisibleScreen?this.setState({filterByVisibleScreen:!1}):this.setState({filterByVisibleScreen:!0})}return e}()},{key:"showFeedback",value:function(){function e(e,t){var a=this;this.setState({feedback:{open:!1}}),setTimeout(function(){a.setState({feedback:{open:!0,text:e,type:t}})},100),this.state.valleSpeedDialRef.open=!1}return e}()},{key:"handleKeyboard",value:function(){function e(e){(13===e.which||13===e.keyCode)&&(e.preventDefault(),(0,_apiCreate2.default)(this.props.baseApi,this.props.canonicalApi,this.props.params,this.showFeedback.bind(this)))}return e}()},{key:"render",value:function(){function e(){var e=this,t=(0,_makeJsxRows2.default)(this.props.rows,this.state.filterByVisibleScreen,this.state.readOnly),a=this.state.feedback.open?_react2.default.createElement(_Snackbar2.default,{report:this.state.feedback.text,type:this.state.feedback.type}):null;return _react2.default.createElement("div",{className:"valleForm",onKeyPress:this.handleKeyboard.bind(this)},_react2.default.createElement(_Switch2.default,{label:"Limitar campos",readOnly:this.state.readOnly,onChange:function(){function t(){return e.changeVisibleScreen()}return t}()}),t,_react2.default.createElement("span",{className:"valleForm__sub"}," * Campos obrigatÃ³rios "),_react2.default.createElement("valle-speed-dial",{id:"valleSpeedDial",class:"valleForm__speedDial"},(0,_makeSpeedDialActions2.default)({states:this.state,props:this.props,editCb:this.makeFieldsEditable.bind(this),cancelCb:this.cancelFieldsEditable.bind(this),feedbackCb:this.showFeedback.bind(this),formCb:this.removeFieldsEditable.bind(this)})),a)}return e}()}]),t}(_react.Component);exports.default=ValleForm;