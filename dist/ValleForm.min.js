function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var a=[],r=!0,l=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){l=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(l)throw n}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_makeJsxRows=require("./makeElements/makeJsxRows"),_makeJsxRows2=_interopRequireDefault(_makeJsxRows),_makeSpeedDialActions=require("./makeElements/makeWebcomponents/makeSpeedDialActions"),_makeSpeedDialActions2=_interopRequireDefault(_makeSpeedDialActions),_Snackbar=require("./components/Snackbar"),_Snackbar2=_interopRequireDefault(_Snackbar),_Switch=require("./components/Switch"),_Switch2=_interopRequireDefault(_Switch),_addFieldsValues=require("./fieldsControl/addFieldsValues"),_addFieldsValues2=_interopRequireDefault(_addFieldsValues),_cleanFields=require("./fieldsControl/cleanFields"),_cleanFields2=_interopRequireDefault(_cleanFields),ValleForm=function(e){var t=e.tabs,a=void 0===t?[]:t,r=e._id,l=void 0===r?"valleForm":r,n=e.values,i=void 0===n?null:n,o=e.readOnly,c=void 0!==o&&o,u=e.baseApi,s=e.canonicalApi,_=e.params,d=e.$loading,f=void 0===d?"loading":d,m=e.buttons,p=void 0===m?[]:m,b=e.token,v=void 0===b?"":b,y=e.getData,k=(0,_react.useState)(!1),S=_slicedToArray(k,2),F=S[0],A=S[1],D=(0,_react.useState)(!1),q=_slicedToArray(D,2),w=q[0],h=q[1],R=(0,_react.useState)(!1),E=_slicedToArray(R,2),x=E[0],g=E[1],C=(0,_react.useState)(0),T=_slicedToArray(C,2),V=T[0],J=T[1],N=(0,_react.useState)({open:!1,text:"",type:""}),O=_slicedToArray(N,2),j=O[0],M=O[1];(0,_react.useEffect)(function(){return A(c)},[c]),(0,_react.useEffect)(function(){i&&$()},[i]);var B=function(){g(x?!1:!0)},I=_react2.default.createRef(),L=function(){I.current.open=!1},P=function(){A(!1),h(!0),L()},W=function(){A(!0),h(!1)},$=function(){(0,_cleanFields2.default)(l),(0,_addFieldsValues2.default)(i,l),A(!0),h(!1),L()},z=function(){(0,_cleanFields2.default)(l),A(!1),h(!1)},G=function(e,t){M({open:!1}),setTimeout(function(){M({open:!0,text:e,type:t})},100)},H=function(e){J(e)},K=a.map(function(e,t){var a=V===t,r=a?"valleForm__tabs__title--selected":"";return _react2.default.createElement("button",{key:t,className:"valleForm__tabs__title "+r,onClick:function(){function e(){return H(t)}return e}()},e.title)}),Q=a.map(function(e,t){var a=(0,_makeJsxRows2.default)(e.lines,x,F,w,v),r=V===t,l=r?"valleForm__tabs__tab--visible":"";return _react2.default.createElement("div",{key:t,className:"valleForm__tabs__tab "+l},a)}),U=j.open?_react2.default.createElement(_Snackbar2.default,{report:j.text,type:j.type}):null;return a.length>0?_react2.default.createElement("div",{className:"valleForm",id:l},_react2.default.createElement(_Switch2.default,{label:"Limitar campos",readOnly:F,onChange:B,_id:String(l)+"-switch"}),1!==a.length?_react2.default.createElement("div",{className:"valleForm__tabs__titles"},K):null,Q,_react2.default.createElement("span",{className:"valleForm__sub"},"* Campos obrigat√≥rios"),_react2.default.createElement("valle-speed-dial",{id:"valleSpeedDial",class:"valleForm__speedDial",ref:I},(0,_makeSpeedDialActions2.default)({buttons:p,readOnly:F,editable:w,baseApi:u,canonicalApi:s,params:_,_id:l,feedbackCb:G,editCb:P,formCb:W,cancelCb:$,newCB:z,token:v,getData:y})),U):f};exports.default=ValleForm;