function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var a=[],r=!0,l=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){l=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(l)throw n}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_makeJsxRows=require("./makeElements/makeJsxRows"),_makeJsxRows2=_interopRequireDefault(_makeJsxRows),_makeSpeedDialActions=require("./makeElements/makeWebcomponents/makeSpeedDialActions"),_makeSpeedDialActions2=_interopRequireDefault(_makeSpeedDialActions),_Switch=require("./components/Switch"),_Switch2=_interopRequireDefault(_Switch),_addFieldsValues=require("./fieldsControl/addFieldsValues"),_addFieldsValues2=_interopRequireDefault(_addFieldsValues),_cleanFields=require("./fieldsControl/cleanFields"),_cleanFields2=_interopRequireDefault(_cleanFields),_makeIdentifier=require("./tabErrorsControl/makeIdentifier"),_makeIdentifier2=_interopRequireDefault(_makeIdentifier),_tabErrorCountControls=require("./tabErrorsControl/tabErrorCountControls"),_tabErrorCountControls2=_interopRequireDefault(_tabErrorCountControls),_showErrorsCount=require("./tabErrorsControl/showErrorsCount"),_showErrorsCount2=_interopRequireDefault(_showErrorsCount),ValleForm=function(e){var t=e.tabs,a=void 0===t?[]:t,r=e._id,l=void 0===r?"valleForm":r,n=e.values,o=void 0===n?null:n,i=e.readOnly,s=void 0!==i&&i,u=e.baseApi,c=e.canonicalApi,d=e.params,_=e.$loading,f=void 0===_?"loading":_,m=e.buttons,p=void 0===m?[]:m,v=e.token,b=void 0===v?"":v,C=e.getData,E=e.setSnackBarStatus,k=void 0===E?null:E,y=e.ValleList,F=void 0===y?null:y,S=e.updateValleList,h=void 0===S?null:S,w=e.cleanOldFormValues,D=void 0===w?null:w,A=(0,_react.useState)(!1),q=_slicedToArray(A,2),g=q[0],R=q[1],V=(0,_react.useState)(!1),x=_slicedToArray(V,2),N=x[0],T=x[1],I=(0,_react.useState)(!1),O=_slicedToArray(I,2),J=O[0],L=O[1],j=(0,_react.useState)(0),B=_slicedToArray(j,2),M=B[0],P=B[1],W=(0,_react.useState)(null),$=_slicedToArray(W,2),z=$[0],G=$[1],H=(0,_react.useState)({}),K=_slicedToArray(H,2),Q=K[0],U=K[1],X=(0,_tabErrorCountControls2.default)(Q,U);(0,_react.useEffect)(function(){return R(s)},[s]),(0,_react.useEffect)(function(){o&&re()},[o]);var Y=function(){L(J?!1:!0)},Z=_react2.default.createRef(),ee=function(){console.log("==========================="),console.log("Speed Dial:"),console.log(Z.current),console.log("==========================="),Z.current&&(Z.current.open=!1)},te=function(){R(!1),T(!0),ee()},ae=function(){R(!0),T(!1),ee()},re=function(){(0,_cleanFields2.default)(l),(0,_addFieldsValues2.default)(o,l),R(!0),T(!1),ee()},le=function(){(0,_cleanFields2.default)(l,G),R(!1),T(!1),ee(),D()},ne=function(e,t){k&&k({show:!0,text:e,type:t})},oe=function(e){P(e)},ie=a.map(function(e,t){var a=M===t,r=a?"valleForm__tabs__title--selected":"",l=(0,_makeIdentifier2.default)(e.title,t),n=(0,_showErrorsCount2.default)(Q,l);return _react2.default.createElement("button",{key:t,className:"valleForm__tabs__title "+r,onClick:function(){function e(){return oe(t)}return e}()},e.title,n?_react2.default.createElement("span",{className:"valleForm__tabs__badge"}," ",n," "):null)}),se=a.map(function(e,t){var a=(0,_makeIdentifier2.default)(e.title,t),r=(0,_makeJsxRows2.default)(e.lines,J,g,N,b,l,u,d,k,F,f,X,a,o,z),n=M===t,i=n?"valleForm__tabs__tab--visible":"",s=r.filter(function(e){return null!==e});return _react2.default.createElement("div",{key:t,className:"valleForm__tabs__tab "+i},s.length?s:_react2.default.createElement("spam",{className:"valleForm__empty-message"},"Não há campos disponíveis."))});return a.length>0?_react2.default.createElement("div",{className:"valleForm",id:l},_react2.default.createElement(_Switch2.default,{label:"Limitar campos",readOnly:g,onChange:Y,_id:String(l)+"-switch"}),1!==a.length?_react2.default.createElement("div",{className:"valleForm__tabs__titles"},ie):null,se,_react2.default.createElement("span",{className:"valleForm__sub"},"* Campos obrigatórios"),Array.isArray(p)&&p.length?_react2.default.createElement("valle-speed-dial",{id:"valleSpeedDial",class:"valleForm__speedDial",ref:Z},(0,_makeSpeedDialActions2.default)({buttons:p,readOnly:g,editable:N,baseApi:u,canonicalApi:c,params:d,_id:l,feedbackCb:ne,editCb:te,formCb:ae,cancelCb:re,newCB:le,token:b,getData:C,closeSpeedDial:ee,updateValleList:h,tabErrorCount:X,setCleanup:G})):null):f};exports.default=ValleForm;